<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio KMITL</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            --kmitl-orange: #F58025;
            --kmitl-maroon: #ffa155;
            --background-color: #c9c9c9; /* Dark Maroon Tint */
            --text-color: #e0e0e0;
            --border-color: #4d4d4d;
            --container-bg: rgba(63, 56, 56, 0.9);
            --pixel-size: 10px;
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            cursor: none;
            image-rendering: pixelated;
        }

        body {
            font-family: 'VT323', monospace;
            background-color: var(--background-color);
            background-image:
                linear-gradient(var(--kmitl-orange, 0.1), var(--kmitl-orange, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, var(--kmitl-orange, 0.1), var(--kmitl-orange, 0.1) 1px, transparent 1px);
            background-size: 50px 50px; /* Pixel grid background */
            min-height: 100vh; overflow-x: hidden;
            color: var(--text-color); font-size: 22px; /* Increased for better VT323 */
            line-height: 1.7; position: relative;
        }

        /* Scanlines Overlay */
        body::after {
            content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            width: 100%; height: 100%; pointer-events: none;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.3) 1px, transparent 1px, transparent 4px);
            z-index: 99999; opacity: 0.5;
        }

        /* Custom KMITL Pixel Cursor */
        .cursor-pixel {
            width: 24px; height: 24px;
            background: var(--kmitl-orange);
            border: 4px solid var(--kmitl-maroon);
            box-shadow: 2px 2px 0 var(--text-color);
            position: fixed; z-index: 100000;
            pointer-events: none; transform: translate(0, 0);
            transition: none;
        }
         a, button, .nav-btn, .timeline-item, .gallery-item, .certificate-item { cursor: none; }

        .container {
            max-width: 850px; margin: 0 auto;
            position: relative; padding-bottom: 100px;
        }

        /* Page Structure & Transitions */
        .page {
            width: 100%; min-height: 80vh;
            display: none; flex-direction: column;
            justify-content: center; align-items: center;
            padding: 2rem; 
            position: absolute; /* Changed to absolute for transitions */
            top: 1.5rem; left: 1rem; right: 1rem;
            background: var(--container-bg);
            border: var(--pixel-size) solid var(--kmitl-orange);
            box-shadow: var(--pixel-size) var(--pixel-size) 0 0 var(--kmitl-maroon);
            margin: 1.5rem 0; /* Only top/bottom margin */
            text-align: center;
            opacity: 0; /* Start hidden for animations */
            transition: opacity 0.3s ease-in-out; /* Fallback transition */
            padding-bottom: 50px; /* Add padding for long content */
            transform: translateZ(0); /* Promote to GPU layer for smoother anims */
        }
        .page.active {
            display: flex;
            opacity: 1; /* Show active page */
            z-index: 10; /* Ensure active is on top */
        }
        .page::-webkit-scrollbar {
            display: none;
        }
        .content-page.active {
            display: block;
            position: relative;
            overflow-y: auto;
            max-height: calc(100vh - 120px); /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏•‡πâ‡∏ô‡∏à‡∏≠ */
        }

        /* --- Page Transition Animations --- */
        @keyframes glitch-in {
            0% { opacity: 0; transform: translateX(50px) skewX(-20deg); filter: blur(5px); }
            20% { opacity: 1; transform: translateX(-20px) skewX(10deg); filter: blur(0px); }
            40% { opacity: 1; transform: translateX(10px) skewX(-5deg); }
            60% { opacity: 1; transform: translateX(-5px) skewX(2deg); }
            80% { opacity: 1; transform: translateX(2px) skewX(-1deg); }
            100% { opacity: 1; transform: translateX(0) skewX(0); filter: blur(0px); }
        }
        @keyframes glitch-out {
            0% { opacity: 1; transform: translateX(0) skewX(0); }
            50% { opacity: 0.5; transform: translateX(-50px) skewX(20deg); filter: blur(5px); }
            100% { opacity: 0; transform: translateX(-100px) skewX(30deg); filter: blur(10px); }
        }
        @keyframes fade-down-in {
            0% { opacity: 0; transform: translateY(-80px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes slide-left-in {
            0% { opacity: 0; transform: translateX(-100px); }
            100% { opacity: 1; transform: translateX(0); }
        }
        @keyframes zoom-in {
            0% { opacity: 0; transform: scale(0.6); }
            100% { opacity: 1; transform: scale(1); }
        }
        @keyframes rise-up-in {
            0% { opacity: 0; transform: translateY(100px); }
            100% { opacity: 1; transform: translateY(0); }
        }
         @keyframes flip-in {
            0% { opacity: 0; transform: perspective(1000px) rotateY(-90deg); }
            100% { opacity: 1; transform: perspective(1000px) rotateY(0); }
        }

        /* Animation Classes */
        .page-glitch-in { animation: glitch-in 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both; }
        .page-fade-down-in { animation: fade-down-in 0.8s cubic-bezier(0.250, 0.460, 0.450, 0.940) both; }
        .page-slide-left-in { animation: slide-left-in 0.7s cubic-bezier(0.250, 0.460, 0.450, 0.940) both; }
        .page-zoom-in { animation: zoom-in 0.6s ease-out both; }
        .page-rise-up-in { animation: rise-up-in 0.7s ease-out both; }
        .page-flip-in { animation: flip-in 0.8s ease-in-out both; }
        .page-exit { animation: glitch-out 0.6s cubic-bezier(0.550, 0.085, 0.680, 0.530) both; }
        /* --- End Transitions --- */


        /* KMITL Logo */
        .kmitl-logo-img {
            width: 120px; height: 120px; margin: 0 auto 1.5rem; display: block;
            background: white; padding: 5px;
            border: 4px solid var(--kmitl-orange);
            border-radius: 100px;
            box-shadow: 4px 4px 0 0 var(--kmitl-maroon);
            animation: pulse-kmitl 1.5s steps(2, end) infinite;
        }
        @keyframes pulse-kmitl {
            50% { transform: scale(1.05); border-color: var(--kmitl-maroon); box-shadow: 4px 4px 0 0 var(--kmitl-orange); }
        }

        /* Text Styles */
        .title, .section-title {
            font-family: 'Press Start 2P', cursive; font-size: 2rem;
            color: var(--kmitl-orange); text-shadow: 3px 3px 0 var(--kmitl-maroon);
            margin-bottom: 1.5rem; text-transform: uppercase;
            text-align: center; line-height: 1.5;
        }
        .section-title { margin-bottom: 2.5rem; }
        .subtitle { font-size: 1.3rem; color: #ccc; margin-bottom: 2rem; }
        .name { font-size: 1.8rem; font-weight: 700; color: #fff; margin-bottom: 0.8rem; }
        .school { font-size: 1.1rem; color: var(--kmitl-orange); font-weight: 600; text-transform: uppercase; }

        /* Images */
        .profile-img, .ces-img, .big-img, .gallery-item img, .contact-info-img {
            height: auto;
            width: 200px;
            border: 4px solid var(--kmitl-orange);
            box-shadow: 4px 4px 0 0 var(--kmitl-maroon);
            background-color: #fff; padding: 4px;
            transition: transform 0.2s steps(4, end);
        }
        .profile-img { width: 220px; height: 300px; margin: 0 auto 1.5rem; object-fit: cover; }
        .ces-img { width: 100%; max-width: 280px; margin: 1rem auto; display: block; }
        .big-img { width: 100%; max-width: 450px; margin: 1.5rem auto; display: block; }
        .profile-img:hover, .ces-img:hover, .big-img:hover, .gallery-item img:hover { transform: scale(1.03) rotate(2deg); }

        /* Navigation */
        .nav-container {
            position: fixed; bottom: 1rem; left: 50%;
            transform: translateX(-50%) translateY(0); /* Show position */
            z-index: 1000;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bounce effect transition */
            display: none; /* Initially hidden */
        }
        .nav-container.hidden {
            transform: translateX(-50%) translateY(150%); /* Move down to hide */
        }
        .nav {
            background: var(--container-bg); padding: 0.8rem; display: flex; gap: 0.8rem;
            border: var(--pixel-size) solid var(--kmitl-maroon);
            box-shadow: var(--pixel-size) var(--pixel-size) 0 0 var(--kmitl-orange);
        }
        .nav-btn {
            width: 50px; height: 50px; border: none;
            background: var(--kmitl-maroon); color: var(--kmitl-orange);
            cursor: none; transition: all 0.2s steps(2, end);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; border: 3px solid var(--kmitl-orange);
            box-shadow: 3px 3px 0 0 #500000;
        }
        .nav-btn:hover { background: var(--kmitl-orange); color: var(--kmitl-maroon); transform: translate(3px, 3px); box-shadow: none; border-color: var(--kmitl-maroon); }
        .nav-btn.active {
            background: var(--kmitl-orange); color: #fff; transform: translate(3px, 3px); box-shadow: none;
            border-color: var(--kmitl-maroon); text-shadow: 1px 1px 0 var(--kmitl-maroon);
        }

        /* Play Button */
        .play-btn {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5rem;
            padding: 1rem 2rem;
            background: var(--kmitl-orange);
            color: #fff;
            border: 4px solid var(--kmitl-maroon);
            box-shadow: 6px 6px 0 var(--kmitl-maroon);
            text-transform: uppercase;
            margin-top: 2rem;
            transition: all 0.2s steps(2, end);
        }
        .play-btn:hover {
            background: var(--kmitl-maroon);
            color: var(--kmitl-orange);
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 var(--kmitl-orange);
        }


        /* Profile Grid - Fixed Layout */
        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Profile Page */
        .profile-info {
            background: rgba(0,0,0,0.7);
            padding: 1.5rem;
            border: 2px solid var(--game-green);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 156, 64, 0.3);
        }

        .profile-info h3 {
            color: var(--game-green); font-size: 1.4rem; margin-bottom: 1rem;
            font-family: 'Press Start 2P', cursive;
            text-shadow: 0 0 5px var(--game-green);
        }
        .contact-info {
            background: var(--kmitl-maroon); color: white; padding: 1.5rem; margin-top: 2rem;
            border: 4px solid var(--kmitl-orange);
        }
        .contact-info h3 { color: white; border: none; text-shadow: 2px 2px 0 #000;}
        .contact-item span:first-child { color: var(--kmitl-orange); font-size: 1.5rem; }


        /* Timeline */
        .timeline { position: relative; padding-left: 2rem; border-left: 4px dashed var(--kmitl-orange); }
        .timeline::before { content: none; /* Removed old line */ }
        .timeline-item {
            position: relative; margin-bottom: 2rem; background: rgba(245, 128, 37, 0.1);
            padding: 1.5rem; margin-left: 1rem; border: 3px solid var(--kmitl-maroon);
        }
        .timeline-item::before {
            content: '>>'; font-family: 'Press Start 2P';
            position: absolute; left: -3.5rem; top: 1.5rem;
            width: 20px; height: 20px; background: none;
            color: var(--kmitl-orange); font-size: 1.5rem;
            border: none; box-shadow: none;
        }
        .timeline-year {
            background: var(--kmitl-orange); color: var(--background-color);
            padding: 0.4rem 1rem; font-weight: bold;
            display: inline-block; margin-bottom: 1rem; font-size: 1.2rem;
            border: 2px solid var(--kmitl-maroon);
        }
        .timeline-item h3 { color: var(--kmitl-orange); }

        /* Gallery & Activities */
        .gallery { display: grid; grid-template-columns: 1fr; gap: 2rem; margin-top: 2rem; }
        .gallery-item {
            background: var(--container-bg); border: 3px solid var(--kmitl-maroon);
            padding: 1.5rem; text-align: center;
            transition: transform 0.2s steps(2, end);
            box-shadow: 3px 3px 0 0 var(--kmitl-orange);
        }
        .gallery-item:hover { transform: translate(-3px, -3px); box-shadow: 6px 6px 0 0 var(--kmitl-orange); }
        .gallery-item img { border-color: var(--kmitl-orange); box-shadow: 4px 4px 0 0 var(--kmitl-maroon); }
        .gallery-item h3 { color: var(--kmitl-orange); }

        /* Skills Section */
        .skills-section {
            margin-top: 2rem;
            padding: 1.2rem;
            background: #2a2a2a;
            border: 4px solid var(--kmitl-maroon);
            box-shadow: 4px 4px 0 0 var(--kmitl-orange);
        }

        .skills-section h3 {
            font-family: 'Press Start 2P', cursive;
            color: var(--kmitl-orange);
            text-shadow: 2px 2px 0 var(--kmitl-maroon);
            font-size: clamp(1rem, 3vw, 1.5rem);
            margin-bottom: 1rem;
        }
        .skill-bar {
            width: 100%; background-color: #222;
            border: 2px solid var(--game-green);
            padding: 2px; height: 25px; margin-bottom: 1rem;
            border-radius: 5px; overflow: hidden;
        }
        .skill-level {
            height: 100%; background: var(--kmitl-orange);
            box-shadow: inset -4px 0 0 0 var(--kmitl-maroon);
        }
        .skill-level::before { /* Pixel blocks effect */
            content: ""; display: block; width: 100%; height: 100%;
            background: repeating-linear-gradient(90deg,
                transparent 0px, transparent 6px,
                rgba(255,255,255,0.3) 6px, rgba(255,255,255,0.3) 8px);
            animation: skillFlow 2s linear infinite;
        }



        @keyframes skillFlow {
            0% { background-position: 0px 0px; }
            100% { background-position: 16px 0px; }
        }
        /* Hide percentage text, use visual blocks */
        .lua { width: 65%; } .html { width: 50%; } .css { width: 50%; } .js { width: 45%; }


        /* Responsive */
        @media (min-width: 600px) {
            .gallery { grid-template-columns: 1fr 1fr; }
            .title, .section-title { font-size: 2.2rem; }
        }
        @media (max-width: 768px) {
            .profile-grid {
                grid-template-columns: 1fr;
            }

            .game-hud {
                flex-direction: column; gap: 0.5rem; padding: 0.5rem;
            }

            .level-bar { width: 150px; }
                
            .arcade-title {
                font-size: 2rem;
                text-shadow: 2px 2px 0 var(--kmitl-maroon),
                            4px 4px 0 rgba(0,0,0,0.3);
            }
            .skills-section {
                padding: 1rem;
                margin-top: 1.5rem;
                border-width: 3px;
            }

            .profile-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .skill-bar {
                height: 15px;
                margin-bottom: 0.8rem;
            }
        }
        @media (max-width: 600px) {
            .nav-container {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                width: 100vw;
                transform: none;
                z-index: 1000;
                display: block !important;
                background: var(--container-bg);
                border-radius: 0;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
            }
            .nav {
                flex-wrap: wrap;
                justify-content: space-around;
                gap: 0.2rem;
                padding: 0.4rem;
                border-width: 2px;
                box-shadow: none;
            }
            .nav-btn {
                width: 38px;
                height: 38px;
                font-size: 1.1rem;
                padding: 0;
                border-width: 2px;
            }
        }
        @media (max-width: 480px) {
            body { font-size: 18px; }
            .title, .section-title { font-size: 1.6rem; }
            .profile-img { width: 100px; height: 200px; }
            .page { padding: 1rem; left: 0.5rem; right: 0.5rem; top: 1rem; }
            .nav { gap: 0.4rem; padding: 0.5rem; }
            .nav-btn { width: auto; height: auto; font-size: 1.3rem; }
            .cursor-pixel { display: none; }
            * { cursor: auto; }
             a, button, .nav-btn, .timeline-item, .gallery-item, .certificate-item { cursor: pointer; }
        }

        /* Ensure enough space for absolute positioned pages */
        #page-container-wrapper {
            position: relative;
            min-height: 120vh; /* Increase height to allow scrolling */
            padding-bottom: 100px;
        }

        /* Typewriter (keep as is) */
        .typewriter {
            overflow: hidden; border-right: .10em solid var(--kmitl-orange);
            white-space: nowrap; margin: 0 auto; letter-spacing: .10em;
            animation: typing 3.5s steps(30, end), blink-caret .75s step-end infinite;
        }
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: var(--kmitl-orange); } }

        #pacman-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; /* Corrected width/height */
            height: 100%;
            z-index: -1; /* Place it behind content */
            pointer-events: none;
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô <style> */
        #loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--background-color);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
}

.loading-content {
    text-align: center;
    image-rendering: pixelated;
}

.loading-logo {
    width: 120px;
    height: 120px;
    margin-bottom: 20px;
    image-rendering: pixelated;
    animation: pixel-bounce 0.5s infinite alternate;
}

.loading-text {
    font-family: 'Press Start 2P', cursive;
    color: var(--kmitl-orange);
    font-size: 24px;
    margin-bottom: 20px;
    animation: pixel-blink 1s infinite;
}

.loading-bar-container {
    width: 300px;
    height: 30px;
    border: 4px solid var(--kmitl-orange);
    padding: 4px;
    margin: 20px auto;
    position: relative;
    background: #2a2a2a;
}

.loading-pixels {
    height: 100%;
    width: 0%;
    background: repeating-linear-gradient(
        90deg,
        var(--kmitl-orange) 0px,
        var(--kmitl-orange) 8px,
        var(--kmitl-maroon) 8px,
        var(--kmitl-maroon) 16px
    );
    transition: width 0.2s steps(20);
}

.loading-percentage {
    font-family: 'Press Start 2P', cursive;
    color: var(--kmitl-orange);
    font-size: 16px;
    margin-top: 10px;
}

@keyframes pixel-bounce {
    0% { transform: translateY(0) scale(1); }
    100% { transform: translateY(-10px) scale(1.1); }
}

@keyframes pixel-blink {
    0%, 49% { opacity: 1; }
    50%, 100% { opacity: 0; }
}

/* ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Arcade Cabinet */
.arcade-cabinet {
    width: 100%;
    max-width: 850px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(45deg, #2a2a2a, #1a1a1a);
    border: 8px solid var(--kmitl-orange);
    box-shadow: 0 0 30px rgba(245, 128, 37, 0.3),
                inset 0 0 20px rgba(245, 128, 37, 0.2);
    border-radius: 10px;
    position: relative;
}

.arcade-screen {
    background: #000;
    padding: 20px;
    border: 4px solid var(--kmitl-maroon);
    border-radius: 5px;
    margin-bottom: 30px;
    position: relative;
    overflow: hidden;
}

.arcade-title {
    font-family: 'Press Start 2P', cursive;
    font-size: clamp(1.5rem, 5vw, 3rem); /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏≤‡∏°‡∏à‡∏≠‡πÅ‡∏ö‡∏ö responsive */
    color: var(--kmitl-orange);
    text-align: center;
    text-shadow: 4px 4px 0 var(--kmitl-maroon),
                 8px 8px 0 rgba(0,0,0,0.3);
    margin-bottom: 10px;
    animation: neon 1.5s ease-in-out infinite alternate;
    word-break: break-word; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏ô‡∏à‡∏≠ */
    line-height: 1.3;
    padding: 0 10px;
}

.arcade-subtitle {
    font-family: 'Press Start 2P', cursive;
    font-size: 1rem;
    color: #fff;
    text-align: center;
    margin-bottom: 30px;
}

.arcade-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.arcade-logo {
    width: 200px;
    height: 200px;
    border: 4px solid var(--kmitl-orange);
    border-radius: 50%;
    padding: 10px;
    background: #fff;
    animation: float 3s ease-in-out infinite;
}

.arcade-controls {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 20px;
}

.arcade-joystick {
    width: 60px;
    height: 120px;
    background: var(--kmitl-orange);
    border-radius: 10px;
    position: relative;
    transform-origin: bottom;
    transition: transform 0.2s;
}

.arcade-joystick:hover {
    transform: rotate(-15deg);
}

.start-button {
    font-family: 'Press Start 2P', cursive;
    font-size: 1.5rem;
    padding: 15px 40px;
    background: var(--kmitl-orange);
    color: #fff;
    border: none;
    border-radius: 50px;
    box-shadow: 0 5px 0 var(--kmitl-maroon),
                0 10px 20px rgba(0,0,0,0.3);
    cursor: pointer;
    transition: transform 0.1s, box-shadow 0.1s;
}

.start-button:hover {
    transform: translateY(2px);
    box-shadow: 0 3px 0 var(--kmitl-maroon),
                0 5px 10px rgba(0,0,0,0.3);
}

@keyframes neon {
    from {
        text-shadow: 0 0 10px var(--kmitl-orange),
                     0 0 20px var(--kmitl-orange),
                     0 0 30px var(--kmitl-orange);
    }
    to {
        text-shadow: 0 0 5px var(--kmitl-orange),
                     0 0 10px var(--kmitl-orange),
                     0 0 15px var(--kmitl-orange);
    }
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.name.typewriter {
    font-size: clamp(1.2rem, 4vw, 1.8rem);
    overflow: hidden;
    border-right: .10em solid var(--kmitl-orange);
    white-space: nowrap;
    margin: 0 auto;
    letter-spacing: .10em;
    animation: typing 3.5s steps(30, end), blink-caret .75s step-end infinite;
    max-width: 90vw; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏ô‡∏à‡∏≠ */
}

@media (max-width: 768px) {
    .name.typewriter {
        font-size: clamp(1rem, 3.5vw, 1.5rem);
        letter-spacing: .08em;
        animation: typing 2.5s steps(20, end), blink-caret .75s step-end infinite;
    }
}

@media (max-width: 480px) {
    .name.typewriter {
        font-size: clamp(0.9rem, 3vw, 1.2rem);
        letter-spacing: .05em;
        animation: typing 2s steps(15, end), blink-caret .75s step-end infinite;
    }
}

/* ‡∏õ‡∏£‡∏±‡∏ö animation typing ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏≠ */
@keyframes typing {
    from { 
        width: 0;
        border-right-color: var(--kmitl-orange);
    }
    to { 
        width: 100%;
        border-right-color: var(--kmitl-orange);
    }
}



    </style>
</head>
<body>
    <div id="loading-screen">
        <div class="loading-content">
            <img src="image/logo.png" alt="KMITL Logo" class="loading-logo">
            <div class="loading-text">LOADING...</div>
            <div class="loading-bar-container">
                <div class="loading-pixels"></div>
            </div>
            <div class="loading-percentage">0%</div>
        </div>
    </div>

    <div class="container" id="page-container-wrapper">
        <div class="page cover-page" id="cover">
            <div class="arcade-cabinet">
        <div class="arcade-screen">
            <h1 class="arcade-title">PORTFOLIO</h1>
            <h2 class="arcade-subtitle">Faculty of Computer Engineering - KMITL</h2>
            <div class="arcade-content">
                <img src="image/logo.png" alt="KMITL Logo" class="arcade-logo">
                <img class="profile-img" src="image/1748512166738.jpg" alt="Profile">
                <h2 class="name typewriter">Apichai Khampanin</h2>
                <p class="school">King Mongkut's Institute of Technology Ladkrabang</p>
            </div>
        </div>
        <div class="arcade-controls">
            <div class="arcade-joystick"></div>
            <button id="play-button" class="start-button">START</button>
            <div class="arcade-joystick"></div>
        </div>
    </div>
        </div>

        <div class="page content-page" id="preface">
            <h2 class="section-title">PREFACE</h2>
            <p>
                Ever since I was young, I‚Äôve been fascinated by technology and its endless possibilities. That feeling naturally led me to Intention with the field of computer science ‚Äî and it‚Äôs the reason I chose to pursue this path at King Mongkut‚Äôs Institute of Technology Ladkrabang.            </p>
            <p>
                Throughout my studies here, I‚Äôve come to truly appreciate the power of change in the world of computer engineering. I get excited every time I discover or develop something new. Those moments have confirmed to me that this is exactly the path I want to keep walking on.            </p>
            <img class="big-img" src="image/kmitl-big.jpg">
        </div>

        <div class="page content-page" id="sop">
            <h2 class="section-title">Statement of Purpose</h2>
            <p>
                My name is Apichai Kamphanin, a high school student from Sirirattanathorn School ‚Äî but you can just call me ‚ÄúAh‚Äù I‚Äôm currently aiming to study Computer Science at King Mongkut‚Äôs Institute of Technology Ladkrabang. I‚Äôve always been fascinated by technology, and I want to be someone who helps push the boundaries of what computers can do.            </p>
            <p>
                Ever since I was a child, I‚Äôve been passionate about the world of computers. Whenever I had the chance, I‚Äôd dive into learning more about tech and mathematics ‚Äî and through that, I discovered programming, algorithms, and problem-solving. I really enjoy studying math and physics because they train me to think logically and analytically, which are crucial skills for understanding complex computer systems            </p>
            <p>
                One of the projects I‚Äôve worked on was a small application I built to help manage certain school activities. It wasn‚Äôt perfect ‚Äî I made mistakes ‚Äî but I learned a lot from the experience. It gave me a chance to apply what I‚Äôve studied in a real way, and I felt proud of what I created. That feeling pushed me to keep going further along the path toward computer engineering.            </p>
            <img class="big-img" src="image/banner.jpg">
        </div>

        <div class="page content-page" id="profile">
            <h2 class="section-title">Profile</h2>
            <div class="profile-grid">
                <div class="skills-section">
                    <h3>Personal Info</h3>
                    <p><strong>Name:</strong> Apichai Khmapanin</p>
                    <p><strong>Nickname:</strong> Ah</p>
                    <p><strong>D.O.B:</strong> Dec 8, 2006</p>
                    <p><strong>Age:</strong> 18</p>
                    <p><strong>School:</strong> Sirirattanathorn</p>
                    <p><strong>Program:</strong> English-Math</p>
                    <p><strong>Hobbies:</strong> Coding, Music</p>
                </div>

                <div class="skills-section">
                    <h3>Tech_Skills.exe</h3>
                    <div class="skill">
                        <p>// Lua</p>
                        <div class="skill-bar">
                            <div class="skill-level lua"></div>
                        </div>
                    </div>
                    <div class="skill">
                        <p>// HTML</p>
                        <div class="skill-bar">
                            <div class="skill-level html"></div>
                        </div>
                    </div>
                    <div class="skill">
                        <p>// CSS</p>
                        <div class="skill-bar">
                            <div class="skill-level css"></div>
                        </div>
                    </div>
                    <div class="skill">
                        <p>// JavaScript</p>
                        <div class="skill-bar">
                            <div class="skill-level js"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="contact-info">
                    <h3>About Me</h3>
                    <p>A passionate student KMITL Computer Engineering with a strong interest in tech & innovation. I enjoy creating solutions via programming and exploring CS possibilities.</p>
                    <p>My goal is to contribute to tech advancement while continuously learning.</p>
                 <img src="image/1730697104765.jpg" alt="Profile Icon" class="contact-info-img">
                <h3>Contact</h3>
                <div class="contact-item"><span>üìß</span><span>ApichaiDont@gmail.com</span></div>
                <div class="contact-item"><span>üì±</span><span>080-891-0414</span></div>
                <div class="contact-item"><span>üìç</span><span>Baan Suan Lalana, Prawet, BKK</span></div>
                <div class="contact-item"><span>üë§</span><span>FB: Apichai Kmapanin</span></div>
            </div>
        </div>

        <div class="page content-page" id="education">
            <h2 class="section-title">Education</h2>
            <div class="timeline">
                <div class="timeline-item"><div class="timeline-year">2013</div><h3>Kindergarten</h3><p>Sri Eiam Anusorn</p><p></p></div>
                <div class="timeline-item"><div class="timeline-year">2019</div><h3>Primary</h3><p>Sri Eiam Anusorn</p><p>// GPA : 3.6 </p></div>
                <div class="timeline-item"><div class="timeline-year">2022</div><h3>Jr. High</h3><p>Sirirattanathorn</p><p>// GPA : 2.53 </p></div>
                <div class="timeline-item"><div class="timeline-year">2024</div><h3>High School</h3><p>Sirirattanathorn</p><p>// GPA : 3.94 <p></div>
                <div class="timeline-item"><div class="timeline-year">NOW</div><h3>University</h3><p>KMITL (Expected)</p><p></p></div>
            </div>
        </div>

        <div class="page content-page" id="activities">
            <h2 class="section-title">Activities</h2>
            <div class="gallery">
                <div class="gallery-item">><a href="image/f.jpg" target="_blank"><img src="image/f.jpg" alt="Activity 1"></a><h3>World Vision 2566</h3><p>Community service & workshops.</p></div>
                <div class="gallery-item"><a href="image/ff.jpg" target="_blank"><img src="image/ff.jpg" alt="Activity 2"></a><h3>Art Exhibition 2566</h3><p>Showcased creative works.</p></div>
                <div class="gallery-item"><a href="image/w.jpg" target="_blank"><img src="image/w.jpg" alt="Activity 3"></a><h3>Math Magic Comp 2567</h3><p>Problem-solving challenge.</p></div>
                <div class="gallery-item"><a href="image/ww.jpg" target="_blank"><img src="image/ww.jpg" alt="Activity 4"></a><h3>Programming Wkshop 2567</h3><p>Enhanced coding skills.</p></div>
                <div class="gallery-item"><a href="image/1748348851846.jpg" target="_blank"><img src="image/1748348851846.jpg" alt="Activity 5"></a><h3>educational activity 2567</h3><p>A community service or scout-related event</p></div>
            </div>
        </div>
        <div class="page content-page" id="experience">
            <h2 class="section-title">Experience</h2>
            <div class="gallery">
                <div class="gallery-item"><a href="https://apichaiweb.netlify.app" target="_blank"><img src="image/eas.jpg" alt="Old Profile"></a><h3>Old Profile Site</h3><p>My first portfolio attempt.</p><a href="https://apichaiweb.netlify.app"><p>https://apichaiweb.netlify.app</p></a></div>
                <div class="gallery-item"><a href="https://srtlearn.netlify.app/" target="_blank"><img src="image/eaa.jpg" alt="School Site"></a><h3>School Category Site</h3><p>A project for school resources.</p><a href="https://srtlearn.netlify.app/"><p>https://srtlearn.netlify.app/</p></a></div>
                <div class="gallery-item"><a href="https://portfolio-apichai.netlify.app/" target="_blank"><img src="image/psa.jpg" alt="Portfolio Site"></a><h3>Another Portfolio</h3><p>A different style portfolio.</p><a href="https://portfolio-apichai.netlify.app/"><p>https://portfolio-apichai.netlify.app/</p></a></div>
            </div>

        </div>

        <div class="page content-page" id="certificates">
            <h2 class="section-title">Certificates</h2>
            <div class="certificate-item"><img class="ces-img" src="image/ces.jpg" alt="Cert 1"><div class="year-badge">2022</div><h3>Student Dev Lvl 70</h3><p>Recognized leadership and academic excellence.</p></div>
            <div class="certificate-item"><img class="ces-img" src="image/ces1.jpg" alt="Cert 2"><div class="year-badge">2023</div><h3>Student Dev Lvl 71</h3><p>Continued growth and advanced capabilities.</p></div>
            <div class="certificate-item"><img class="ces-img" src="image/ces2.jpg" alt="Cert 3"><div class="year-badge">2024</div><h3>Math Magic Comp.</h3><p>Showcased math & problem-solving skills.</p></div>
        </div>
    </div>
    <div class="nav-container" id="main-nav">
        <div class="nav">
            <button class="nav-btn" data-page="cover" onclick="showPage('cover', this)"><img src="icon/home.png" width="50" height="50"></button>
            <button class="nav-btn" data-page="preface" onclick="showPage('preface', this)"><img src="icon/sheet.png" width="50" height="50"></button>
            <button class="nav-btn" data-page="sop" onclick="showPage('sop', this)"><img src="icon/web-development.png" width="50" height="50"></button>
            <button class="nav-btn" data-page="profile" onclick="showPage('profile', this)"><img src="icon/man.png" width="50" height="50"></button>
            <button class="nav-btn" data-page="education" onclick="showPage('education', this)"><img src="icon/image-removebg-preview_7.png" width="50" height="50"></button>
            <button class="nav-btn" data-page="activities" onclick="showPage('activities', this)"><img src="icon/battery-status.png" width="50" height="50"></button>
            <button class="nav-btn" data-page="experience" onclick="showPage('experience', this)"><img src="icon/start-up.png" width="50" height="50"></button>
            <button class="nav-btn" data-page="certificates" onclick="showPage('certificates', this)"><img src="icon/trophy.png" width="50" height="50"></button>
        </div>
    </div>

    <div class="cursor-pixel"></div>
    <canvas id="pacman-canvas"></canvas>

    <script>
        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô showPage */
        function centerSectionTitle(page) {
            const sectionTitle = page.querySelector('.section-title');
            if (sectionTitle) {
                setTimeout(() => {
                    const titleRect = sectionTitle.getBoundingClientRect();
                    const windowHeight = window.innerHeight;
                    const scrollTop = window.pageYOffset;
                    const targetScroll = scrollTop + titleRect.top - (windowHeight / 2) + (titleRect.height / 2);
                    
                    window.scrollTo({
                        top: targetScroll,
                        behavior: 'smooth'
                    });
                }, 0); // ‡∏£‡∏≠‡πÉ‡∏´‡πâ animation ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô
            }
        }

        // ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô simulateLoading ‡πÄ‡∏î‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
    function initializeLoading() {
        const loadingScreen = document.getElementById('loading-screen');
        const loadingPixels = document.querySelector('.loading-pixels');
        const loadingPercentage = document.querySelector('.loading-percentage');
        const resources = document.images; // ‡∏£‡∏ß‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        let loadedResources = 0;
        
        // ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£
        function updateProgress() {
            const progress = (loadedResources / resources.length) * 100;
            loadingPixels.style.width = `${progress}%`;
            loadingPercentage.textContent = `${Math.floor(progress)}%`;
            
            if (loadedResources >= resources.length) {
                // ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
                setTimeout(() => {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        showPage('cover', document.querySelector('.nav-btn[data-page="cover"]'));
                    }, 300);
                }, 200);
            }
        }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    Array.from(resources).forEach(img => {
        if (img.complete) {
            loadedResources++;
        } else {
            img.addEventListener('load', () => {
                loadedResources++;
                updateProgress();
            });
            img.addEventListener('error', () => {
                loadedResources++;
                updateProgress();
            });
        }
    });

    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
    updateProgress();

    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å
    if (resources.length === 0 || loadedResources === resources.length) {
        setTimeout(() => {
            loadingScreen.style.display = 'none';
            showPage('cover', document.querySelector('.nav-btn[data-page="cover"]'));
        }, 500);
    }
}

// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç document.addEventListener
document.addEventListener('DOMContentLoaded', function() {
    initializeLoading();
});

        const pages = document.querySelectorAll('.page');
        const navButtons = document.querySelectorAll('.nav-btn');
        const cursorPixel = document.querySelector('.cursor-pixel');
        const navContainer = document.getElementById('main-nav');
        const playButton = document.getElementById('play-button');
        let currentPage = null;
        const transitionDuration = 100; // Match animation duration
        let navHideTimer;
        let navScrollListenerActive = false;

        // Define animation classes for each page
        const pageAnimations = {
            'cover': 'page-glitch-in',
            'preface': 'page-fade-down-in',
            'sop': 'page-slide-left-in',
            'profile': 'page-zoom-in',
            'education': 'page-rise-up-in',
            'activities': 'page-flip-in',
            'experience': 'page-glitch-in',
            'certificates': 'page-zoom-in'
        };

        // Function to handle scroll and timer for navbar
        const handleNavScroll = () => {
            navContainer.classList.add('hidden'); // Hide on scroll
            clearTimeout(navHideTimer);
            navHideTimer = setTimeout(() => {
                navContainer.classList.remove('hidden'); // Show after 2s
            }, 500); // <-- Sets the time (in ms) for the navbar to reappear (here: 2000ms = 2 seconds)
        };

        // Function to add the scroll listener
        function startNavScrollListener() {
            if (!navScrollListenerActive) {
                window.addEventListener('scroll', handleNavScroll);
                navScrollListenerActive = true;
            }
        }

        // Function to remove the scroll listener
        function stopNavScrollListener() {
            if (navScrollListenerActive) {
                window.removeEventListener('scroll', handleNavScroll);
                clearTimeout(navHideTimer); // Clear any pending show
                navScrollListenerActive = false;
            }
        }

        function showPage(pageId, clickedButton) {
            const nextPage = document.getElementById(pageId);

            if (!nextPage || (currentPage && currentPage.id === pageId)) {
                return;
            }

            const oldPage = currentPage;
            currentPage = nextPage;

            // --- Navbar Visibility Control ---
            if (pageId === 'cover') {
                navContainer.style.display = 'none';
                navContainer.classList.add('hidden');
                stopNavScrollListener();
            } else if (navContainer.style.display === 'none') {
                // Show nav and start animation/listener if moving away from cover
                navContainer.style.display = 'block';
                navContainer.classList.add('hidden'); // Start hidden
                startNavScrollListener();
                setTimeout(() => {
                    navContainer.classList.remove('hidden'); // Trigger slide-up animation
                }, 50); // Small delay
            }
            // --- End Navbar Visibility Control ---

            const enterAnimationClass = pageAnimations[pageId] || 'page-glitch-in';

            // Add exit animation to the old page
            if (oldPage) {
                oldPage.classList.add('page-exit');
                oldPage.classList.remove('active');
                // Remove all possible animation classes
                Object.values(pageAnimations).forEach(animClass => oldPage.classList.remove(animClass));

                setTimeout(() => {
                    oldPage.style.display = 'none';
                    oldPage.classList.remove('page-exit');
                }, transitionDuration - 50);
            }

            // Prepare and show the new page
            nextPage.classList.remove('page-exit');
            nextPage.style.display = nextPage.classList.contains('cover-page') ? 'flex' : 'block';
             // Remove any lingering animation classes before adding new one
            Object.values(pageAnimations).forEach(animClass => nextPage.classList.remove(animClass));

            setTimeout(() => {
                nextPage.classList.add('active', enterAnimationClass);
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
                if (pageId !== 'cover') {
                    centerSectionTitle(nextPage);
                }
            }, 10); // Small delay for display change before animation

            // Update Nav Buttons
            navButtons.forEach(btn => btn.classList.remove('active'));
            if (clickedButton) {
                clickedButton.classList.add('active');
            } else {
                const btn = document.querySelector(`.nav-btn[data-page="${pageId}"]`);
                if(btn) btn.classList.add('active');
            }

            // Restart typewriter
            if (pageId === 'cover') {
                const nameElement = document.querySelector('.name.typewriter');
                if (nameElement) {
                    nameElement.style.animation = 'none';
                    nameElement.offsetHeight;
                    nameElement.style.animation = null;
                }
            }
        }

        // Play Button Click Listener
        playButton.addEventListener('click', () => {
            showPage('preface', document.querySelector('.nav-btn[data-page="preface"]'));
        });


        // document.addEventListener('DOMContentLoaded', function() {
        //     simulateLoading();
        // });

        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô:
        document.addEventListener('DOMContentLoaded', function() {
            initializeLoading();
        });

        document.addEventListener('keydown', function(e) {
            const pageIds = ['cover', 'preface', 'sop', 'profile', 'education', 'activities', 'experience', 'certificates'];
            const currentId = currentPage ? currentPage.id : 'cover';
            let currentIndex = pageIds.indexOf(currentId);
            let nextIndex = currentIndex;

            if (e.key === 'ArrowRight') {
                nextIndex = (currentIndex < pageIds.length - 1) ? currentIndex + 1 : currentIndex;
            } else if (e.key === 'ArrowLeft') {
                nextIndex = (currentIndex > 0) ? currentIndex - 1 : currentIndex;
            }

            if (nextIndex !== currentIndex) {
                const nextPageId = pageIds[nextIndex];
                showPage(nextPageId, document.querySelector(`.nav-btn[data-page="${nextPageId}"]`));
            }
        });

        // Custom Cursor JavaScript
        document.addEventListener('mousemove', (e) => {
            cursorPixel.style.left = `${e.clientX}px`;
            cursorPixel.style.top = `${e.clientY}px`;
        });

        // PackMan background (Keep as is)
        const canvas = document.getElementById("pacman-canvas");
        const ctx = canvas.getContext("2d");

        const tileSize = 32;
        const cols = Math.floor(window.innerWidth / tileSize);
        const rows = Math.floor(window.innerHeight / tileSize);

        function resizeCanvas() {
            canvas.width = cols * tileSize;
            canvas.height = rows * tileSize;
        }
        // window.addEventListener("resize", () => location.reload());
        resizeCanvas();

        const pacman = {
            x: Math.floor(cols / 2),
            y: Math.floor(rows / 2),
            radius: tileSize / 2 - 4,
            direction: getRandomDirection(),
        };

        function getRandomDirection() {
            const dirs = ["up", "down", "left", "right"];
            return dirs[Math.floor(Math.random() * dirs.length)];
        }

        const dots = [];
        for (let x = 0; x < cols; x++) {
            for (let y = 0; y < rows; y++) {
                if (Math.random() < 0.25 && (x !== pacman.x || y !== pacman.y)) {
                    dots.push({ x, y });
                }
            }
        }

        function drawDot(dot) {
            ctx.beginPath();
            ctx.arc(dot.x * tileSize + tileSize / 2, dot.y * tileSize + tileSize / 2, 4, 0, Math.PI * 2);
            ctx.fillStyle = "white";
            ctx.fill();
        }

        function drawPacman(pac, mouthOpen = true) {
            const px = pac.x * tileSize + tileSize / 2;
            const py = pac.y * tileSize + tileSize / 2;

            ctx.beginPath();
            let startAngle = 0.2, endAngle = 1.8;

            switch (pac.direction) {
                case "right": startAngle = 0.2; endAngle = 1.8; break;
                case "left": startAngle = 1.2; endAngle = 0.8; break;
                case "up": startAngle = 1.75; endAngle = 1.25; break;
                case "down": startAngle = 0.75; endAngle = 0.25; break;
            }

            if (mouthOpen) {
                ctx.moveTo(px, py);
                ctx.arc(px, py, pac.radius, startAngle * Math.PI, endAngle * Math.PI, false);
            } else {
                ctx.arc(px, py, pac.radius, 0, 2 * Math.PI);
            }
            ctx.fillStyle = "orange";
            ctx.fill();
            ctx.closePath();

            // Eye
            ctx.beginPath();
            let eyeX = px, eyeY = py;
            if (pac.direction === "right") eyeX += 8, eyeY -= 10;
            if (pac.direction === "left") eyeX -= 8, eyeY -= 10;
            if (pac.direction === "up") eyeY -= 12;
            if (pac.direction === "down") eyeY += 4;
            ctx.arc(eyeX, eyeY, 3, 0, 2 * Math.PI);
            ctx.fillStyle = "black";
            ctx.fill();
        }

        function movePacman() {
            switch (pacman.direction) {
                case "right": pacman.x += 1; break;
                case "left": pacman.x -= 1; break;
                case "up": pacman.y -= 1; break;
                case "down": pacman.y += 1; break;
            }

            // ‡∏ß‡∏ô‡∏à‡∏≠
            if (pacman.x < 0) pacman.x = cols - 1;
            if (pacman.x >= cols) pacman.x = 0;
            if (pacman.y < 0) pacman.y = rows - 1;
            if (pacman.y >= rows) pacman.y = 0;

            // ‡∏Å‡∏¥‡∏ô‡∏à‡∏∏‡∏î
            for (let i = 0; i < dots.length; i++) {
                if (dots[i].x === pacman.x && dots[i].y === pacman.y) {
                    dots.splice(i, 1);
                    pacman.direction = getRandomDirection(); // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏ô‡∏à‡∏∏‡∏î
                    break;
                }
            }

            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏∏‡πà‡∏°‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÄ‡∏ä‡πà‡∏ô‡∏ó‡∏∏‡∏Å 5 ‡∏Å‡πâ‡∏≤‡∏ß)
            if (Math.random() < 0.1) {
                pacman.direction = getRandomDirection();
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            dots.forEach(drawDot);
            drawPacman(pacman, Math.floor(Date.now() / 150) % 2 === 0);
            movePacman();

            setTimeout(() => requestAnimationFrame(animate), 200);
        }

        animate();
    </script>
</body>
</html>